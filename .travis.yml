language: node_js
node_js:
- lts/*
before_script:
- npm run test
- node make.js build
before_deploy:
- node make.js after_build
deploy:
  provider: npm
  email: atsquad@cimpress.com
  api_key:
    secure: DFpjEX17Sbb88FSu56LexjVhgkeaSmGehH3BSp4y9C64QsIv4HJDLAPFw+QlqpxXHFsGulI4BgPmm0Lj+n7Sn/Sv6JaqpCJWKwSsgq71JpzlIdT9tPxAnoo65sMPi2t0XMSJkfujqyzT2nYBj7JQgeT/+t1cyZOw9AGKX/snb416xW9jTPfeZwdW0AhP7zQFTwdYAdb9nWoZUsuqTpjxQ5Tm6qqAw5+7VjC8uqdYvO3xuk4fTS2oEhK0XIW0Pwk6NjOQolWhBi28k9GaufbnZOuMuktdYmmh3GjWR4zUP7UJQeAnEsjtSQA6RSHAU/I4YbRkrsjQRxIJuvk8n3xdDPgVkL91V1dIpOzzbejNEEwlsty95RAIqQmm6Qf7B9t/fAMW3BEO98b9Or7xf7lih9qlzzvhG07EjFb53mRB04iqUwht1YNpTrOCM3aDw8XgS4iYJiPCztskPB9OmQ8ikTFGqAVUkBiSdfzGqQeJbu7LdeSWR6aIZHBMbkUrVLsR/Tmuo7kRP1e5GkYKkeRNoNjjROfhinpybIQ3LfeJheerlBI3GOcv4H8YmOWlSvJ17+1xTA6qkpXslsq3aHvVOfgkrQHRGXWAx3F1KeY2qkwhigxZtEJRAVBibDKok0jm9+MDIgMZOvNe7H9Ill19nSbbGT7uvPOAWWumAGQZM9U=
  skip_cleanup: true
  on:
    all_branches: true
    condition: "$TRAVIS_BRANCH != master"
branches:
  only:
  - master
  - "/^release.*/"
env:
  global:
    secure: QQ7dznU8GKrUniFc0Bhg4jzMRWB5srV2leGTxVI7CZxypWnA2F068tFipt8DHd9H3z6td8kgwVjE2zlk4sS/qmpK5cZlj5epAY2oJ/RU8oSYNaNCDLMQ/XKNbrBm9r4McrPJFeKjAo80dcyTlmzYlXFIFjIIUvxAZdFYLwErvw9UQwb7hBI2Pu/DcFtp2MfGbWyxiswlVfqemQgTV3LZWSLLkbeKhWQdnunDObS0yITqFijvDlI6WlI6JN7spdGHoIXV00PoWxeWVz1yRY79IYqBPhpPuq6aoeLLduI3QpZK1UTsDhuu+0F4YGNP1DJcNMgE+CplPNI1RqzxbrGEnFVsaW/pfomXSfwPPNyA3JFY+i2W5cyOyi0ZfsXe8naZwnoO/SIilpcjuXtUc5SvlPcabSDJZSG1AbPz3DCwtSQ/YCDdrgDAV4wBEI+lDbblsY4gH7+j13qdbJQkfv113ieCb6bnS/BG/mSMztjPPzUZO6krA6ZLNOa/yNNG9nWfkTv2lPC7weDRlnE6zXXQIB2iHu6p/mrkWKo2e+HQRbbv/h8doup/K40BKAfcmCGVjmJ5C1bwhvamAHiflA1rYaqWBuW+2uhYvws4S/Iqk1qoudjtbxLUMRmkHeK8B5S3yK0b0P6TTct26RetQfg+Qe9AeUCmCAMSRvw0fHz8JZY=
