language: node_js
node_js:
- "8"
before_script:
- npm run test
- node make.js build
before_deploy:
- node make.js after_build
deploy:
  provider: npm
  email: atsquad@cimpress.com
  api_key:
    secure: dIIN4PhDVU61o/O6LzM7wFYoqiKbT1ITLtbXkjSTsSyvoIFomm5QmcYXuA8zJndnJ1KA0hftK0RjgWWJKC43nIj4494QSujcnr67L4bLivfZX5+DbNaJqjz7a+D5ZYFmz00rYXg8brgbiSvunJjuZnZwTFuSi2Djbu/7hVm28TZKt7UFe0gZYIfplnjIM1MpFv7ZRwV5zysH4MXwlRaoZzyaP1cnBA69L0PSTf6OfwxGDW61sCr46cGDm5hsjTq8AbU5QsOYH5fUmeUDBS+elacaRaaewRC8C9u60hVSnEoCJm+uBENbKzHIqugLad8jOvGpzEIJ0H3bOb/lI/qXS4gke58QHa/B/hCtgWf5xXssF5aGSLmnclbsdQ8iAOwopXnGkvxHIeEjUSMPLdDtqQhOR8ullA7rBLDplKVwkJEIHG8mhwX5f2dU73B4+6zhA9NgNMXld67hd0fMxXA/AJeuJdNIXpmv54cShDYbEYPtDhWFxY8PR+PuZi3qMxAxh2elWmUGr172CVPF72/HvvzFYgDEb5K/ROIfBP52yMh2fWVCDPqd0jG/RhLtDP0vMdRtgNwaxCIM6Fvqee5YJT6L1A2d1SVF7Vr4RGbLbw0T8Cv/muFwxXZOjWXEFi4LXKEbnuIDZYkrQtTKZkZdtYzu8MLtard25hrsYTKsE+o=
  skip_cleanup: true
  on:
    all_branches: true
    condition: "$TRAVIS_BRANCH != master"
branches:
  only:
  - master
  - "/^release.*/"
env:
  global:
    secure: QQ7dznU8GKrUniFc0Bhg4jzMRWB5srV2leGTxVI7CZxypWnA2F068tFipt8DHd9H3z6td8kgwVjE2zlk4sS/qmpK5cZlj5epAY2oJ/RU8oSYNaNCDLMQ/XKNbrBm9r4McrPJFeKjAo80dcyTlmzYlXFIFjIIUvxAZdFYLwErvw9UQwb7hBI2Pu/DcFtp2MfGbWyxiswlVfqemQgTV3LZWSLLkbeKhWQdnunDObS0yITqFijvDlI6WlI6JN7spdGHoIXV00PoWxeWVz1yRY79IYqBPhpPuq6aoeLLduI3QpZK1UTsDhuu+0F4YGNP1DJcNMgE+CplPNI1RqzxbrGEnFVsaW/pfomXSfwPPNyA3JFY+i2W5cyOyi0ZfsXe8naZwnoO/SIilpcjuXtUc5SvlPcabSDJZSG1AbPz3DCwtSQ/YCDdrgDAV4wBEI+lDbblsY4gH7+j13qdbJQkfv113ieCb6bnS/BG/mSMztjPPzUZO6krA6ZLNOa/yNNG9nWfkTv2lPC7weDRlnE6zXXQIB2iHu6p/mrkWKo2e+HQRbbv/h8doup/K40BKAfcmCGVjmJ5C1bwhvamAHiflA1rYaqWBuW+2uhYvws4S/Iqk1qoudjtbxLUMRmkHeK8B5S3yK0b0P6TTct26RetQfg+Qe9AeUCmCAMSRvw0fHz8JZY=
